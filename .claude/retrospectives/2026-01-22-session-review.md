# 반성회 기록 - 2026-01-22 (오후 세션)

## 이번 세션 개요

이번 세션에서는 오른쪽 패널(DrawingToolsPanel) 전면 개편 작업을 수행했습니다.

## 발생한 문제들

### 문제 1: Zone 스크롤 문제 - ScrollArea 대신 네이티브 스크롤 사용 필요
- **증상**: Zone 섹션을 열면 내용이 끝까지 보이지 않고 스크롤도 안됨
- **영향**: 사용자가 Zone 설정(Opacity 등)을 사용할 수 없음
- **근본 원인**:
  - Radix ScrollArea 컴포넌트가 flex 컨테이너 내부에서 제대로 동작하지 않음
  - `overflow-hidden` + `flex-1`만으로는 충분하지 않았음
- **해결책**: ScrollArea 대신 네이티브 `overflow-y-auto` + `pb-8` 패딩 사용
- **조치 상태**: [x] 완료

### 문제 2: Zone 드래그 시 피드백 부족
- **증상**: Zone을 드래그해서 그릴 때 어디에 그려지고 있는지 보이지 않음
- **영향**: 사용자가 Zone 위치/크기를 예측할 수 없어 사용성 저하
- **근본 원인**:
  - `zoneDragStart`만 있고 `zoneDragCurrent`가 없어 실시간 위치 추적 불가
  - 미리보기 렌더링 로직이 없었음
- **해결책**:
  - `zoneDragCurrent` 상태 추가
  - `updateZoneDrag` 액션 추가
  - ActionLayer에 `renderZonePreview()` 함수 추가
- **조치 상태**: [x] 완료

### 문제 3: 탭 구조에서 통합 구조로 변경 시 일부 기능 누락 (잠재적)
- **증상**: 없음 (사용자가 아직 확인 안함)
- **영향**: 기존 PlayerTab, LineTab, ZonesTab의 일부 기능이 통합 시 누락되었을 수 있음
- **근본 원인**:
  - 3개의 탭 컴포넌트를 1개 파일로 수동 통합
  - 각 탭의 모든 기능을 꼼꼼히 체크하지 않음
- **해결책**: 기존 탭 파일과 비교하여 누락된 기능 확인 필요
- **조치 상태**: [ ] 대기 (사용자 피드백 필요)

## 잘한 점

1. **단계별 배포 요청 준수**: 사용자가 "배포해"라고 명시적으로 요청할 때만 배포함
2. **빌드 검증**: 모든 변경사항 후 `npm run build` 실행하여 타입 에러 확인
3. **Zone 미리보기 기능 추가**: 사용자 요청에 따라 드래그 중 실시간 미리보기 구현

## 도출된 규칙

1. **ScrollArea vs 네이티브 스크롤**:
   - flex 컨테이너 내부에서 동적 높이가 필요한 경우 네이티브 `overflow-y-auto` 사용
   - 스크롤 영역 하단에 `pb-8` 등 패딩 추가하여 마지막 요소 가림 방지

2. **드래그 기반 기능에는 항상 시각적 피드백 필요**:
   - 드래그 시작점만 저장하지 말고 현재 위치도 추적
   - 미리보기 렌더링으로 사용자에게 실시간 피드백 제공

3. **UI 컴포넌트 통합 시 체크리스트**:
   - [ ] 기존 컴포넌트의 모든 props 확인
   - [ ] 기존 컴포넌트의 모든 이벤트 핸들러 확인
   - [ ] 기존 컴포넌트의 모든 상태 관리 확인
   - [ ] 통합 후 기능 비교 테스트

## 기술 부채

1. **사용하지 않는 탭 컴포넌트 파일**: `tabs/PlayerTab.tsx`, `tabs/LineTab.tsx`, `tabs/ZonesTab.tsx`, `tabs/SymbolTab.tsx`가 더 이상 사용되지 않음 - 정리 필요

## 다음 액션 아이템

- [ ] 사용하지 않는 탭 컴포넌트 파일 삭제 검토 (사용자 확인 후)
- [ ] 통합된 DrawingToolsPanel과 기존 탭 기능 비교 확인
