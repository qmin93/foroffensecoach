# 배포 스킬 (Deploy Loop)

git push 후 Vercel 배포 로그를 확인하고 오류가 있으면 수정하는 자동화 루프입니다.

## 실행 절차

다음 단계를 순서대로 실행하세요:

### 1. Git Push 실행
```bash
git add . && git commit -m "deploy: auto fix" && git push
```
(이미 커밋된 경우 push만 실행)

### 2. Vercel 배포 대기 및 로그 확인
```bash
# 최신 배포 상태 확인 (30초 간격으로 폴링)
vercel ls --prod -t $VERCEL_TOKEN 2>/dev/null || vercel ls

# 또는 Vercel 대시보드에서 직접 확인
# https://vercel.com/dashboard
```

### 3. 빌드 로그 확인
```bash
# 최신 배포의 빌드 로그 확인
vercel logs --prod -t $VERCEL_TOKEN 2>/dev/null || vercel logs
```

### 4. 오류 분석 및 수정 루프

빌드 로그에서 오류가 발견되면:

1. **오류 메시지 분석**: 로그에서 `error`, `Error`, `failed`, `FAIL` 키워드 확인
2. **오류 유형 파악**:
   - TypeScript 타입 오류 → 해당 파일 수정
   - ESLint 오류 → 린트 규칙 준수하도록 수정
   - 빌드 오류 → next.config.js 또는 의존성 확인
   - 런타임 오류 → 코드 로직 수정

3. **수정 후 재배포**:
   ```bash
   git add . && git commit -m "fix: [오류 설명]" && git push
   ```

4. **성공할 때까지 2-4단계 반복**

### 5. 배포 성공 확인
```bash
# 프로덕션 URL 확인
vercel --prod
```

## 주의사항

- 최대 5회 반복 후에도 실패하면 사용자에게 보고
- 각 수정 시 명확한 커밋 메시지 작성
- 보안 관련 오류는 신중하게 처리

## 대안: Vercel CLI 없이 확인

Vercel CLI가 설치되지 않은 경우:
1. GitHub Actions 로그 확인
2. Vercel 대시보드에서 직접 확인: https://vercel.com/[team]/[project]/deployments
