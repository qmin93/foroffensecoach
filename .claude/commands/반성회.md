# 반성회 실시 (Retrospective & Prevention)

발생한 문제나 오류를 분석하고 재발 방지 대책을 수립하는 프로세스입니다.

## 실행 절차

### 1. 문제 수집 및 정리

최근 세션에서 발생한 문제들을 수집합니다:

- **발생한 오류/버그 목록**
- **의도치 않은 변경사항**
- **사용자 피드백/불만**
- **빌드 실패 원인**

### 2. 근본 원인 분석 (5 Whys)

각 문제에 대해 5번 "왜?"를 물어 근본 원인을 파악합니다:

```markdown
## 문제: [문제 설명]

1. 왜 이 문제가 발생했는가?
   → [원인 1]

2. 왜 [원인 1]이 발생했는가?
   → [원인 2]

3. 왜 [원인 2]가 발생했는가?
   → [원인 3]

4. 왜 [원인 3]이 발생했는가?
   → [원인 4]

5. 왜 [원인 4]가 발생했는가?
   → [근본 원인]
```

### 3. 재발 방지 대책 수립

각 근본 원인에 대해 방지 대책을 수립합니다:

| 문제 | 근본 원인 | 재발 방지 대책 | 담당 | 완료 기한 |
|------|-----------|----------------|------|-----------|
| ... | ... | ... | Claude | 즉시 |

**대책 유형:**
- **코드 가드레일**: 타입 체크, 린트 규칙, 테스트 추가
- **문서화**: CLAUDE.md에 규칙 추가
- **프로세스 개선**: 체크리스트, 검증 단계 추가
- **자동화**: pre-commit 훅, CI 파이프라인

### 4. CLAUDE.md 업데이트

발견된 규칙이나 주의사항을 CLAUDE.md에 추가합니다:

```markdown
## 주의사항 (반성회에서 도출)

### [날짜] 추가된 규칙
- **규칙 1**: [설명]
- **규칙 2**: [설명]
```

### 5. 예방 조치 즉시 실행

실행 가능한 조치는 즉시 수행합니다:

1. 필요한 코드 가드레일 추가
2. 타입 정의 보강
3. 테스트 케이스 추가
4. 문서 업데이트

### 6. 반성회 기록 저장

반성회 결과를 기록으로 남깁니다:

```bash
# .claude/retrospectives/ 폴더에 기록 저장
```

## 반성회 템플릿

```markdown
# 반성회 기록 - [날짜]

## 이번 세션에서 발생한 문제들

### 문제 1: [제목]
- **증상**: [무엇이 잘못되었는가]
- **영향**: [사용자/시스템에 미친 영향]
- **근본 원인**: [5 Whys 분석 결과]
- **재발 방지책**: [구체적인 조치]
- **조치 상태**: [ ] 대기 / [x] 완료

### 문제 2: ...

## 도출된 규칙

1. **[규칙명]**: [상세 설명]
2. ...

## 다음 액션 아이템

- [ ] [액션 1]
- [ ] [액션 2]
```

## 자주 발생하는 문제 패턴과 방지책

### 1. 스타일/색상 의도치 않은 변경
- **방지책**: 특정 요소(예: BALL)는 예외 처리 주석과 함께 명시
- **예**: `// BALL 전용: 갈색(#8B4513) 유지, 반응형 사이징 제외`

### 2. 레이어 순서 혼동
- **방지책**: 레이어 순서를 주석으로 명시
- **예**: `// Layer order: Field → Action → Player (중요: 변경 시 사용자 확인 필요)`

### 3. 기존 기능 파손
- **방지책**: 변경 전 영향 범위 분석, 빌드 테스트 필수

### 4. 타입 불일치
- **방지책**: 수정 후 즉시 `npm run build` 실행

## 실행 예시

사용자가 "반성회 실시"를 요청하면:

1. 최근 대화에서 발생한 문제 목록 작성
2. 각 문제의 근본 원인 분석
3. 재발 방지 대책 수립
4. CLAUDE.md에 규칙 추가 (필요시)
5. 즉시 실행 가능한 조치 수행
6. 결과 요약 보고
